# Production Environment Configuration
# Optimized for reliability and performance with cost consciousness

environment = "production"
aws_region  = "us-east-1"

# VPC Configuration - HA setup
vpc_cidr            = "10.2.0.0/16"
enable_nat_gateway  = true
single_nat_gateway  = false  # Multiple NATs for HA

# EKS Configuration - Production sizing
eks_cluster_version         = "1.28"
eks_node_group_desired_size = 3
eks_node_group_min_size     = 2
eks_node_group_max_size     = 10
eks_node_instance_types     = ["t4g.large", "t4g.xlarge"]  # ARM-based for cost/performance
eks_spot_instance_types     = ["t4g.large", "t4g.xlarge", "m6g.large", "m6g.xlarge"]

# RDS Configuration - Production instance
rds_instance_class           = "db.t4g.large"  # Good performance, reasonable cost
rds_allocated_storage        = 100
rds_max_allocated_storage    = 1000
rds_backup_retention_period  = 30  # 30 days of backups
rds_multi_az                 = true  # Multi-AZ for HA

# ElastiCache removed - using in-memory caching

# S3 Configuration
enable_s3_versioning = true  # Version control for safety
s3_lifecycle_days    = 90  # Standard lifecycle

# Monitoring - Full retention
enable_monitoring   = true
log_retention_days  = 30  # 30 days retention

# Cost Optimization - Conservative for production
enable_spot_instances       = true
spot_allocation_percentage  = 50  # 50/50 split for balance
enable_scheduled_scaling    = false  # No scheduled scaling in production

# Security
enable_deletion_protection = true  # Protect critical resources

# Production-specific settings
owner_email = "ops@diagnyx.ai"
allowed_cidr_blocks = [
  "0.0.0.0/0"  # Update with actual IP ranges for security
]

# Authentication Configuration
cognito_user_pool_name = "diagnyx-production-user-pool"
cognito_client_name    = "diagnyx-production-client"
ses_domain            = "diagnyx.ai"
from_email            = "noreply@diagnyx.ai"
api_gateway_endpoint  = "https://api.diagnyx.ai"

# Password Policy - Strict for production
password_policy = {
  minimum_length    = 12
  require_lowercase = true
  require_numbers   = true
  require_symbols   = true
  require_uppercase = true
}

# Database Configuration
database_name = "diagnyx_users"
database_master_username = "postgres"